<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>JSON ë³‘í•©ê¸°</title>
  <style>
    body { font-family: sans-serif; padding: 20px; background: #f9f9f9; }
    select, button { margin: 5px 0; padding: 5px; font-size: 16px; }
    pre { background: #eee; padding: 10px; overflow-x: auto; max-height: 300px; }
  </style>
</head>
<body>
  <h1>ğŸ“¦ JSON ë³‘í•©ê¸°</h1>
  <p>ê° ì„¹í„°ì—ì„œ ì›í•˜ëŠ” JSON íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”.</p>
  <div id="selectors"></div>
  <button onclick="mergeJSON()">ë³‘í•©í•˜ê¸°</button>
  <button onclick="downloadJSON()">ğŸ’¾ ë‹¤ìš´ë¡œë“œ</button>
  <h3>ğŸ“„ ë³‘í•©ëœ ê²°ê³¼</h3>
  <pre id="output"></pre>

  <script>
    const NUM_SECTORS = 5; // í•„ìš”ì— ë”°ë¼ 20ê¹Œì§€ ëŠ˜ë¦´ ìˆ˜ ìˆì–´ìš”
    const optionsPerSector = {
      1: ["sector1-option1.json", "sector1-option2.json"],
      2: ["sector2-option1.json", "sector2-option2.json"],
      3: ["sector3-option1.json", "sector3-option2.json"],
      4: ["sector4-option1.json", "sector4-option2.json"],
      5: ["sector5-option1.json", "sector5-option2.json"],
    };

    const selectorsDiv = document.getElementById("selectors");
    for (let i = 1; i <= NUM_SECTORS; i++) {
      const select = document.createElement("select");
      select.id = `sector${i}`;
      const label = document.createElement("label");
      label.textContent = `ì„¹í„° ${i}: `;
      optionsPerSector[i].forEach(opt => {
        const option = document.createElement("option");
        option.value = `jsons/${opt}`;
        option.textContent = opt;
        select.appendChild(option);
      });
      selectorsDiv.appendChild(label);
      selectorsDiv.appendChild(select);
      selectorsDiv.appendChild(document.createElement("br"));
    }

    async function mergeJSON() {
      const merged = [];
      for (let i = 1; i <= NUM_SECTORS; i++) {
        const path = document.getElementById(`sector${i}`).value;
        try {
          const res = await fetch(path);
          const json = await res.json();
          merged.push(...json); // íŒŒì¼ë§ˆë‹¤ ë°°ì—´ í˜•ì‹ì´ë¼ê³  ê°€ì •
        } catch (err) {
          alert(`âš ï¸ ì˜¤ë¥˜: ${path} íŒŒì¼ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.`);
        }
      }
      document.getElementById("output").textContent = JSON.stringify(merged, null, 2);
      window.mergedResult = merged;
    }

    function downloadJSON() {
      const blob = new Blob([JSON.stringify(window.mergedResult || [], null, 2)], { type: "application/json" });
      const a = document.createElement("a");
      a.href = URL.createObjectURL(blob);
      a.download = "merged.json";
      a.click();
    }
  </script>
</body>
</html>
